{
  "name": "ROS2 Humble Dev",
  "build": { "dockerfile": "Dockerfile" },
  "workspaceFolder": "/home/vscode/workspace",
  "mounts": [
    "source=${localWorkspaceFolder},target=/home/vscode/workspace,type=bind"
  ],
  "runArgs": [
      "--gpus=all",
      "-v", "${env:SSH_AUTH_SOCK}:/ssh-agent",
      "-e", "SSH_AUTH_SOCK=/ssh-agent",
      "-e", "DISPLAY=${localEnv:DISPLAY}",
      "-e", "LIBGL_ALWAYS_SOFTWARE=1",
      "-e", "QT_XCB_GL_INTEGRATION=none",
      "-v", "/tmp/.X11-unix:/tmp/.X11-unix:rw"
  ],
  "containerEnv": {
    "QT_X11_NO_MITSHM": "1",
    "QT_QPA_PLATFORM": "xcb",
    "DISPLAY": "${localEnv:DISPLAY}",
    "SSH_AUTH_SOCK": "/ssh-agent",
    "LIBGL_ALWAYS_SOFTWARE": "1",
    "QT_XCB_GL_INTEGRATION": "none",
    "TERM": "xterm-256color"
  },
  "remoteUser": "vscode",
  "postStartCommand": "xhost +local:vscode || true",
  "forwardPorts": [5000, 9000, 9090],
  "portsAttributes": {
    "9000": { "label": "MCP Server", "onAutoForward": "ignore" },
    "9090": { "label": "ROSBridge", "onAutoForward": "ignore" }
  },
  "customizations": {
    "vscode": {
      "extensions": [
        "ms-python.python",
        "ms-azuretools.vscode-docker",
        "twxs.cmake",
        "ms-vscode.cpptools",
        "ms-python.vscode-pylance",
        "astral-sh.ruff"
      ],
      "settings": {
        "terminal.integrated.defaultProfile.linux": "bash"
      }
    }
  }
}